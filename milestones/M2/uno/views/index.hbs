<div class='landing-top'>
	<p>{{count}} games</p>
	<button id='create-game' class='secondary-btn'>Create New Game</button>
</div>
<div class='landing'>
	<div class='landing_game-room'>
		{{#each games}}
			<div class='landing_list-item'>
				<div class='landing_list-item_left'>
					<p>id: {{id}}</p>
					<p>players: {{userCount}}/4</p>
				</div>
				<div>
					<a href="/game/{{id}}" class='secondary-btn'>Join</a>
				</div>
			</div>
		{{/each}}
	</div>
	{{> chat}}
</div>
<script>
	const createGameBtn = document.getElementById('create-game');
	if (createGameBtn) {
		createGameBtn.addEventListener('click', async () => { 
			const result = await fetch('/game/create', { method: 'POST', 
			headers: { 'Accept':'application/json', 'Content-Type': 'application/json' }, 
			body: JSON.stringify({title: "Default Game"})}); const body = await result.json();
			console.log(body); 
			location.assign("/game/" + body.gameId)
		}); 
	}
</script>